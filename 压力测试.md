###ab 压测工具

#优化前第一轮测试

#＃Dobee 1.0.* framework

`ab -n 100 -c 50 http://127.0.0.1/dobee/public/index.php/`

测试数据: `hello world`

```
Server Software:        Tengine
Server Hostname:        127.0.0.1
Server Port:            80

Document Path:          /dobee/public/index.php/
Document Length:        11 bytes

Concurrency Level:      50
Time taken for tests:   0.583 seconds
Complete requests:      100
Failed requests:        0
Write errors:           0
Total transferred:      16800 bytes
HTML transferred:       1100 bytes
Requests per second:    171.39 [#/sec] (mean)
Time per request:       291.737 [ms] (mean)
Time per request:       5.835 [ms] (mean, across all concurrent requests)
Transfer rate:          28.12 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    2   2.0      3       5
Processing:   154  261  47.7    261     396
Waiting:      154  261  47.6    261     396
Total:        157  263  48.3    263     401

Percentage of the requests served within a certain time (ms)
  50%    263
  66%    283
  75%    297
  80%    300
  90%    323
  95%    341
  98%    392
  99%    401
 100%    401 (longest request)
``` 	
 	
 =====
 
 
#＃ThinkPHP3.2.* framework
 
 
`ab -n 100 -c 50 http://127.0.0.1/thinkphp/index.php/`
 
 
```
Server Software:        Tengine
Server Hostname:        127.0.0.1
Server Port:            80

Document Path:          /thinkphp/index.php/
Document Length:        11 bytes

Concurrency Level:      50
Time taken for tests:   0.363 seconds
Complete requests:      100
Failed requests:        0
Write errors:           0
Total transferred:      30700 bytes
HTML transferred:       1100 bytes
Requests per second:    275.53 [#/sec] (mean)
Time per request:       181.467 [ms] (mean)
Time per request:       3.629 [ms] (mean, across all concurrent requests)
Transfer rate:          82.61 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    4   6.2      2      15
Processing:    91  167  20.9    166     206
Waiting:       91  167  20.9    166     206
Total:         93  171  21.5    174     208

Percentage of the requests served within a certain time (ms)
  50%    174
  66%    179
  75%    188
  80%    188
  90%    195
  95%    206
  98%    207
  99%    208
 100%    208 (longest request)
```
 
 =====
 
#＃Laravel 5.0.* framework

`ab -n 100 -c 50 http://127.0.0.1/laravel/public/index.php/`

```
Server Software:        Tengine
Server Hostname:        127.0.0.1
Server Port:            80

Document Path:          /laravel/public/index.php/
Document Length:        11 bytes

Concurrency Level:      50
Time taken for tests:   2.071 seconds
Complete requests:      100
Failed requests:        0
Write errors:           0
Total transferred:      98504 bytes
HTML transferred:       1100 bytes
Requests per second:    48.29 [#/sec] (mean)
Time per request:       1035.432 [ms] (mean)
Time per request:       20.709 [ms] (mean, across all concurrent requests)
Transfer rate:          46.45 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    1   0.7      1       2
Processing:   555  959 147.5    941    1514
Waiting:      554  959 147.5    941    1514
Total:        555  959 147.5    941    1515

Percentage of the requests served within a certain time (ms)
  50%    941
  66%   1038
  75%   1060
  80%   1085
  90%   1126
  95%   1144
  98%   1288
  99%   1515
 100%   1515 (longest request)
```
 
====
 
#＃优化后第一轮测试

#＃Dobee1.0.* framework

`ab -n 1000 -c 100 http://127.0.0.1/dobee/public/index.php/`

```
Server Software:        Tengine
Server Hostname:        127.0.0.1
Server Port:            80

Document Path:          /dobee/public/index.php/
Document Length:        11 bytes

Concurrency Level:      100
Time taken for tests:   5.717 seconds
Complete requests:      1000
Failed requests:        0
Write errors:           0
Total transferred:      168000 bytes
HTML transferred:       11000 bytes
Requests per second:    174.91 [#/sec] (mean)
Time per request:       571.712 [ms] (mean)
Time per request:       5.717 [ms] (mean, across all concurrent requests)
Transfer rate:          28.70 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    2   4.8      0      21
Processing:    20  551  80.4    567     749
Waiting:       20  551  80.5    567     748
Total:         36  553  78.5    567     770

Percentage of the requests served within a certain time (ms)
  50%    567
  66%    578
  75%    586
  80%    590
  90%    603
  95%    615
  98%    636
  99%    707
 100%    770 (longest request)
```

#＃ThinkPHP3.2.* framework

`ab -n 1000 -c 100 http://127.0.0.1/thinkphp/index.php/`

```
Server Software:        Tengine
Server Hostname:        127.0.0.1
Server Port:            80

Document Path:          /thinkphp/index.php/
Document Length:        11 bytes

Concurrency Level:      100
Time taken for tests:   3.533 seconds
Complete requests:      1000
Failed requests:        0
Write errors:           0
Total transferred:      307000 bytes
HTML transferred:       11000 bytes
Requests per second:    283.06 [#/sec] (mean)
Time per request:       353.284 [ms] (mean)
Time per request:       3.533 [ms] (mean, across all concurrent requests)
Transfer rate:          84.86 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    0   0.9      0       5
Processing:    48  342  47.4    347     497
Waiting:       48  342  47.4    347     497
Total:         52  343  47.3    348     501

Percentage of the requests served within a certain time (ms)
  50%    348
  66%    360
  75%    368
  80%    374
  90%    389
  95%    411
  98%    431
  99%    452
 100%    501 (longest request)
```

#＃Laravel 5.0.* framework

`ab -n 1000 -c 100 http://127.0.0.1/laravel/public/index.php/`

```
Server Software:        Tengine
Server Hostname:        127.0.0.1
Server Port:            80

Document Path:          /laravel/public/index.php/
Document Length:        11 bytes

Concurrency Level:      100
Time taken for tests:   20.490 seconds
Complete requests:      1000
Failed requests:        0
Write errors:           0
Total transferred:      984930 bytes
HTML transferred:       11000 bytes
Requests per second:    48.80 [#/sec] (mean)
Time per request:       2048.973 [ms] (mean)
Time per request:       20.490 [ms] (mean, across all concurrent requests)
Transfer rate:          46.94 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0   13  42.2      0     171
Processing:   160 1972 261.9   2027    2572
Waiting:      160 1972 262.5   2027    2572
Total:        174 1985 243.8   2031    2572

Percentage of the requests served within a certain time (ms)
  50%   2031
  66%   2057
  75%   2073
  80%   2082
  90%   2108
  95%   2135
  98%   2186
  99%   2387
 100%   2572 (longest request)
```

===

# C10K测试

#＃Dobee1.0.* framework

```
Server Software:        Tengine
Server Hostname:        127.0.0.1
Server Port:            80

Document Path:          /dobee/public/index.php/
Document Length:        11 bytes

Concurrency Level:      10000
Time taken for tests:   68.136 seconds
Complete requests:      10000
Failed requests:        7166
   (Connect: 0, Receive: 0, Length: 7166, Exceptions: 0)
Write errors:           0
Non-2xx responses:      7166
Total transferred:      5972434 bytes
HTML transferred:       4474094 bytes
Requests per second:    146.76 [#/sec] (mean)
Time per request:       68136.157 [ms] (mean)
Time per request:       6.814 [ms] (mean, across all concurrent requests)
Transfer rate:          85.60 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:      156  298  79.8    298     434
Processing:   242 36560 23289.5  33461   67564
Waiting:      242 36559 23289.5  33461   67564
Total:        676 36857 23279.4  33793   67785

Percentage of the requests served within a certain time (ms)
  50%  33793
  66%  63660
  75%  63711
  80%  63713
  90%  63722
  95%  63729
  98%  67009
  99%  67696
 100%  67785 (longest request)
```

#＃ThinkPHP3.2.* framework

`ab -n 10000 -c 10000 http://127.0.0.1/thinkphp/index.php/`

```
Server Software:        Tengine
Server Hostname:        127.0.0.1
Server Port:            80

Document Path:          /thinkphp/index.php/
Document Length:        11 bytes

Concurrency Level:      10000
Time taken for tests:   64.041 seconds
Complete requests:      10000
Failed requests:        6985
   (Connect: 0, Receive: 0, Length: 6985, Exceptions: 0)
Write errors:           0
Non-2xx responses:      6985
Total transferred:      6255160 bytes
HTML transferred:       4335925 bytes
Requests per second:    156.15 [#/sec] (mean)
Time per request:       64040.869 [ms] (mean)
Time per request:       6.404 [ms] (mean, across all concurrent requests)
Transfer rate:          95.39 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:      153  283  75.4    277     420
Processing:   149 31146 24301.1  18715   63474
Waiting:      149 31146 24301.2  18715   63474
Total:        569 31429 24299.6  18947   63638

Percentage of the requests served within a certain time (ms)
  50%  18947
  66%  35092
  75%  63592
  80%  63624
  90%  63632
  95%  63634
  98%  63635
  99%  63636
 100%  63638 (longest request)
```

#＃Laravel 5.0.* framework

`ab -n 10000 -c 10000 http://127.0.0.1/laravel/public/index.php/`

```
Server Hostname:        127.0.0.1
Server Port:            80

Document Path:          /laravel/public/index.php/
Document Length:        11 bytes

Concurrency Level:      10000
Time taken for tests:   64.826 seconds
Complete requests:      10000
Failed requests:        8280
   (Connect: 0, Receive: 0, Length: 8280, Exceptions: 0)
Write errors:           0
Non-2xx responses:      8280
Total transferred:      8061612 bytes
HTML transferred:       5169080 bytes
Requests per second:    154.26 [#/sec] (mean)
Time per request:       64825.844 [ms] (mean)
Time per request:       6.483 [ms] (mean, across all concurrent requests)
Transfer rate:          121.44 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:      358  400  19.5    408     432
Processing:   697 46932 21550.7  63822   64024
Waiting:      697 46931 21550.9  63821   64024
Total:       1129 47331 21549.5  64232   64399

Percentage of the requests served within a certain time (ms)
  50%  64232
  66%  64341
  75%  64359
  80%  64367
  90%  64382
  95%  64389
  98%  64393
  99%  64396
 100%  64399 (longest request)
```

##总结C10K测试

	1.三个框架压力测试，从低压力开始测试，TP明显优于其他两个，Dobee排第二， laravel排第三，无请求失败情况

	2.到了C10K测试，并发一万，连接一万，laravel、Dobee两个框架优势明显上来了。渐渐逼近Thinkphp性能相比之下可以说是胜于TP，因为内部代码和逻辑更为严谨。三者高并发压力测试下都出现请求失败的情况。 TP：6985 Dobee：7166 Laravel： 8280 QPS：TP 156.15 [#/sec] (mean) Dobee: 146.76 [#/sec] (mean) Laravel: 154.26 [#/sec] (mean)










 